%!TEX root = ../../thesis.tex

\begin{tikzpicture}

    % \node[diamond,draw] {figure of simple file service};

    \node[state,initial] (q0) {$q_0$};
    \node[state,below right=1.8 of q0] (q2) {$q_2$};
    \node[state,right=of q0] (q1) {$q_1$};

    \node[] at (1.6,-.80) (mid) {};


    \path (q0) edge[may] node[below,midway] {\transition{request}} (q1) {};
    \path (q0) edge[may] node[sloped,below] {\transition{request}} (q2) {};
    \path (q0) edge[shorten >=0pt] (mid.center) {};
    \path (mid.center) edge[must] (q1) {};
    \path (mid.center) edge[must] (q2) {};

    \path (q2) edge[must] node[sloped,below] {\transition{validate}} (q1) {};
    \path (q1) edge[must,bend right] node[above,midway] {\transition{response}} (q0) {};

\end{tikzpicture}