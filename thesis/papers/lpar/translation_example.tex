%!TEX root = ../../thesis.tex

\begin{figure}[ht]
	\subfloat[A part of an MTSD $S$]{\label{fig:trans1}
		\begin{tikzpicture}[node distance=1.2]
			\node[state,initial] (s) {$s$};
			\node[state,right=of s] (t2) {$t_2$};
			\node[state,above=of t2] (t1) {$t_1$};
			\node[state,below=of t2] (t3) {$t_3$};
			
			\node[below=2 of s]{$\Phi(s)=(a,t_1)\wedge ((b,t_2) \vee (c,t_3))$};
			
			\draw [arc]
				(s) edge[bend left] node[sloped,above] {$a$} node[sloped,below] {$\ci{2,3}$} (t1) 
				(s) edge[dashed] node[sloped,above] {$b$} node[sloped,below] {$\ui{1,3}$} (t2) 
				(s) edge[dashed, bend right] node[sloped,above] {$c$} node[sloped,below] {$3$} (t3) 
			{};
		\end{tikzpicture} }
	\subfloat[Resulting weighted MPG from translation of $S$]{\label{fig:trans2}
	\scalebox{\myscale}{
	\begin{tikzpicture}[node distance=1.2]
		\node[min] (s) {$s$};
		
		\node[max,right=0.2 of s] (s12) {$\{(s,a,t_1),(s,c,t_3) \}$};
		\node[max,above=1.3 of s12] (s11) {$\{(s,a,t_1),(s,b,t_2)\}$};
		\node[max,below=1.3 of s12] (s13) {
		\begin{minipage}{96pt}
		  $\{(s,a,t_1),(s,b,t_2),\\ ~\;\;(s,c,t_3)\}$
		 \end{minipage}
		};
		
		\node[max,right=0.5 of s12] (s22) {$(s,b,t_2)$};
		
		\node[min,above=of s22,yshift=0] (s21) {$(s,a,t_1)$};
		\node[max,below=of s22, yshift=-22] (s23) {$(s,c,t_3)$};


		\node[min,node distance=2,right=0.5 of s21] (s32) {$(s,a,3,t_1)$};
		\node[min,node distance=\diadist,above left=of s32] (s31) {$(s,a,2,t_1)$};
		\node[min,node distance=\diadist,below left=of s32] (s33) {$(s,b,1,t_2)$};		
		\node[min,node distance=\diadist,below right=of s33] (s34) {$(s,b,2,t_2)$};

		\node[min,node distance=\diadist,below left=of s34] (s35) {$(s,b,3,t_2)$};
		\node[min,node distance=\diadist,below right=of s35] (s36) {$(s,c,3,t_3)$};
		
		\node[min,right=0.6 of s32] (t1) {$t_1$};
		\node[min,right=0.6 of s34] (t2) {$t_2$};
		\node[min,right=0.6 of s36] (t3) {$t_3$};
		
		\draw [arc]
			(s) edge (s11) (s) edge (s12) (s) edge (s13)
			
			(s11) edge (s21) (s11) edge (s22) 
			(s12) edge (s21) (s12) edge (s23)
			(s13.20) edge (s21) (s13.20) edge (s22) (s13) edge (s23)
			
			(s21) edge (s31) (s21) edge (s32)
			(s22) edge (s33) (s22) edge (s34.180) (s22) edge (s35)
			(s23) edge (s36.180)
			
			(s31.0) to[bend left] node[sloped,above] {2} node[sloped,below] {$r(a)$}(t1)
			(s32.0) to node[sloped,above] {3} node[sloped,below] {$r(a)$}(t1)
			(s33.0) to[bend left] node[sloped,above] {1} node[sloped,below] {$r(b)$} (t2)
			(s34.0) to node[sloped,above] {2} node[sloped,below] {$r(b)$}(t2)
			(s35.0) to[bend right] node[sloped,above] {3} node[sloped,below] {$r(b)$}(t2)
			
			(s36.0) to node[sloped,above] {3} node[sloped,below] {$r(c)$}(t3)
		{};
	\end{tikzpicture} }}
	
\caption{Translating MTSD to weighted MPG.}\label{fig:example:exp}
\end{figure}
